# Reflection 이란?

- 구체적인 클래스 타입을 알지 못해도 그 클래스의 메소드, 타입, 변수들에 접근할 수 있도록 해주는 Java API

런타임에 지금 실행되고 있는 클래스를 가져와서 실행해야 하는 경우
동적으로 객체를 생성하고 메서드를 호출하는 방법

자바의 리플렉션은 클래스, 인터페이스, 메소드들을 찾을 수 있고, 객체를 생성하거나 변수를 변경하거나 메소드를 호출할 수 있다.

---

### 어떤 경우에 사용될까?

- 코드를 작성할 시점에는 어떤 타입의 클래스를 사용할지 모르지만, 런타임 시점에
지금 실행되고 있는 클래스를 가져와서 실행해야 하는 경우

동적인 바인딩을 이용한 기능을 제공한다.
스프링의 어노테이션이 리플렉션, DI가 리플렉션을 이용한 기능이다.

---

객체 지향언어에서는 객체가 속한 타입을 추적할 수 있는 객체들에 대한 
RTTI(Runtime Type Identification, 런타임 타입 식별정보)를 관리한다.
Java 역시 RTTI를 사용하는 언어 중의 하나이며, JVM은 런타임 타입 정보를 통해
정확한 메소드를 찾아 실행한다.

Java는 런타임 타입정보를 담고 있는 특수한 클래스를 제공하며 그것이 Class이다.
객체에서 Class를 얻어 런타임에 객체의 타입을 알게 되어 동적으로 필드의 값을 조회하거나 메소드를 호출하거나 변경할 수 있다. 이와 같이 런타임에 타입 정보를 
다루는 것

---

사용 예시 - 만약 서버를 운영중에 보안에 위배 되는 요청을 런타임에서 걸러내고 싶을 때 요청 객체에 대한 리플렉션 검사를 통해 필드를 검사할 수 있음
따라서 Getter와 Setter를 이용하는 것보다 서비스 로직의 복잡도를 해결 할 수 있고
더욱 객체 지향적인 아키텍처를 설계할 수 있다.

---

```
Class<?> clazz = Class.forName("com.example.MyClass");
Object obj = clazz.newInstance();

```

- 이런식으로 런타임 시에 동적으로 Class를 할당 해야할 때 쓸 수 있다

또 field에도 동적으로 접근할 수 있고 접근제어자를 변경할 수도 있는데 이는 보안상으로 문제가 있을 수 있기 때문에 관련 조치를 취해주어야 한다.(코드 암호화, 서명 등)
```
MyClass obj = new MyClass();
Field field = obj.getClass().getDeclaredField("myField");
field.setAccessible(true); // private 필드에 접근하기 위해 접근 가능하게 설정
field.set(obj, "new value"); // 필드 값 변경
```
